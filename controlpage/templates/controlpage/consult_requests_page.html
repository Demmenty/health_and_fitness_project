{% extends 'controlpage/layout.html' %}
{% load static %}

{% block title %}–ó–∞—è–≤–∫–∏ –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é{% endblock %}

{% block content %}

<div class="container">
    <br>
    {% if new_consult_requests_count == 0 %}
        <p class="text-center">–ó–∞—è–≤–∫–∏ –Ω–∞ –±–µ—Å–ø–ª–∞—Ç–Ω—É—é –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç</p>
    {% else %}

        <div class="d-flex flex-row">

            <!-- —Å–ø–∏—Å–æ–∫ –∑–∞—è–≤–æ–∫ —Å–ª–µ–≤–∞ -->
            <div class="d-flex flex-column align-middle w-50 me-4">

                {% for consult_signup_entry in consult_signup_entries %}
                    {% if consult_signup_entry.is_read %}
                        <div class="d-flex my-hover-gray justify-content-between align-middle text-wrap border pointer p-2" 
                            id="signup_{{ consult_signup_entry.id }}" name="signup_row" onclick="openForm(event)">
                    {% else %}  
                        <div class="d-flex my-hover-gray justify-content-between align-middle text-wrap border pointer p-2 unread" 
                            id="signup_{{ consult_signup_entry.id }}" name="signup_row" onclick="openForm(event)">
                    {% endif %} 
                            {{ consult_signup_entry }}
                            <span>&#9658;</span>
                        </div>
                {% endfor %}

            </div>

            <!-- —Å–ø–∏—Å–æ–∫ —Ñ–æ—Ä–º —Å–ø—Ä–∞–≤–∞ -->
            <div class="d-flex flex-column w-50">

                {% for entry, form in consult_signups_zip %}
                    <div class="hidden_element border-blueshadow p-2 transition_common" id="signup_container_{{ entry.id }}" name="signup_container">
                        <form method="POST" action="{% url 'consult_requests_page' %}" id="signup_form_{{ entry.id }}" name="signup_form">
                            <button class="btn btn-outline-primary float-end close_btn" type="button" onclick="closeForm()">&#10006;</button>
                            {% csrf_token %}
                            <br>
                            <input type="hidden" name="id" value="{{ entry.id }}">
                            <input type="hidden" name="purpose" value="save">
                            {{ form.as_p }}
                            <div class="d-flex justify-content-between align-items-center">
                                <span>&nbsp;</span>
                                <span class="transition_common text-transparent" id="result_msg_{{ entry.id }}"></span>
                                <button type="submit" class="btn btn-primary">—Å–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                            </div>
                        </form>
                        <form method="POST" action="{% url 'consult_requests_page' %}" id="delete_signup_form_{{ entry.id }}" name="delete_signup_form">
                            {% csrf_token %}
                            <input type="hidden" name="id" value="{{ entry.id }}">
                            <input type="hidden" name="purpose" value="delete">
                            <button type="submit" class="btn btn-danger">üóë</button>
                        </form>
                    </div>
                {% endfor %}

            </div>
                
        </div>
    {% endif %}
<!-- —Ä–∏—Å—É–Ω–æ–∫-->
<img class="float-end" src="{% static 'controlpage/img/cat_with_laptop.svg' %}">

</div>

<br><br>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
<script src="{% static 'controlpage/js/consult_requests.js' %}"></script>
{% endblock %}